<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/yeoman/grunt-usemin#readme"

    >grunt-usemin (v3.1.1)</a>
</h1>
<h4>Replaces references to non-optimized scripts or stylesheets into a set of HTML files (or any templates/views)</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.grunt-usemin">module grunt-usemin</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.configwriter">
            function <span class="apidocSignatureSpan">grunt-usemin.</span>configwriter
            <span class="apidocSignatureSpan">(flow, dirs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.fileprocessor">
            function <span class="apidocSignatureSpan">grunt-usemin.</span>fileprocessor
            <span class="apidocSignatureSpan">(type, patterns, finder, logcb, blockReplacements)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.flow">
            function <span class="apidocSignatureSpan">grunt-usemin.</span>flow
            <span class="apidocSignatureSpan">(flowConfig)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.revvedfinder">
            function <span class="apidocSignatureSpan">grunt-usemin.</span>revvedfinder
            <span class="apidocSignatureSpan">(locator)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">grunt-usemin.</span>configwriter.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">grunt-usemin.</span>fileprocessor.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">grunt-usemin.</span>flow.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">grunt-usemin.</span>revvedfinder.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.grunt-usemin.configwriter">module grunt-usemin.configwriter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.configwriter.configwriter">
            function <span class="apidocSignatureSpan">grunt-usemin.</span>configwriter
            <span class="apidocSignatureSpan">(flow, dirs)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.grunt-usemin.configwriter.prototype">module grunt-usemin.configwriter.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.configwriter.prototype.forEachStep">
            function <span class="apidocSignatureSpan">grunt-usemin.configwriter.prototype.</span>forEachStep
            <span class="apidocSignatureSpan">(blockType, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.configwriter.prototype.postWriters">
            function <span class="apidocSignatureSpan">grunt-usemin.configwriter.prototype.</span>postWriters
            <span class="apidocSignatureSpan">(blockType)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.configwriter.prototype.process">
            function <span class="apidocSignatureSpan">grunt-usemin.configwriter.prototype.</span>process
            <span class="apidocSignatureSpan">(file, config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.configwriter.prototype.stepWriters">
            function <span class="apidocSignatureSpan">grunt-usemin.configwriter.prototype.</span>stepWriters
            <span class="apidocSignatureSpan">(blockType)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.grunt-usemin.fileprocessor">module grunt-usemin.fileprocessor</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.fileprocessor.fileprocessor">
            function <span class="apidocSignatureSpan">grunt-usemin.</span>fileprocessor
            <span class="apidocSignatureSpan">(type, patterns, finder, logcb, blockReplacements)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.grunt-usemin.fileprocessor.prototype">module grunt-usemin.fileprocessor.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.fileprocessor.prototype.process">
            function <span class="apidocSignatureSpan">grunt-usemin.fileprocessor.prototype.</span>process
            <span class="apidocSignatureSpan">(filename, assetSearchPath)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.fileprocessor.prototype.replaceBlocks">
            function <span class="apidocSignatureSpan">grunt-usemin.fileprocessor.prototype.</span>replaceBlocks
            <span class="apidocSignatureSpan">(file)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.fileprocessor.prototype.replaceWith">
            function <span class="apidocSignatureSpan">grunt-usemin.fileprocessor.prototype.</span>replaceWith
            <span class="apidocSignatureSpan">(block)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.fileprocessor.prototype.replaceWithRevved">
            function <span class="apidocSignatureSpan">grunt-usemin.fileprocessor.prototype.</span>replaceWithRevved
            <span class="apidocSignatureSpan">(lines, assetSearchPath)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.grunt-usemin.flow">module grunt-usemin.flow</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.flow.flow">
            function <span class="apidocSignatureSpan">grunt-usemin.</span>flow
            <span class="apidocSignatureSpan">(flowConfig)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.flow.formatStepName">
            function <span class="apidocSignatureSpan">grunt-usemin.flow.</span>formatStepName
            <span class="apidocSignatureSpan">(step)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.flow.formatSteps">
            function <span class="apidocSignatureSpan">grunt-usemin.flow.</span>formatSteps
            <span class="apidocSignatureSpan">(steps)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.grunt-usemin.flow.prototype">module grunt-usemin.flow.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.flow.prototype.blockTypes">
            function <span class="apidocSignatureSpan">grunt-usemin.flow.prototype.</span>blockTypes
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.flow.prototype.post">
            function <span class="apidocSignatureSpan">grunt-usemin.flow.prototype.</span>post
            <span class="apidocSignatureSpan">(blockType)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.flow.prototype.setPost">
            function <span class="apidocSignatureSpan">grunt-usemin.flow.prototype.</span>setPost
            <span class="apidocSignatureSpan">(post)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.flow.prototype.setSteps">
            function <span class="apidocSignatureSpan">grunt-usemin.flow.prototype.</span>setSteps
            <span class="apidocSignatureSpan">(steps)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.flow.prototype.steps">
            function <span class="apidocSignatureSpan">grunt-usemin.flow.prototype.</span>steps
            <span class="apidocSignatureSpan">(blockType)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.grunt-usemin.revvedfinder">module grunt-usemin.revvedfinder</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.revvedfinder.revvedfinder">
            function <span class="apidocSignatureSpan">grunt-usemin.</span>revvedfinder
            <span class="apidocSignatureSpan">(locator)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.grunt-usemin.revvedfinder.prototype">module grunt-usemin.revvedfinder.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.revvedfinder.prototype.find">
            function <span class="apidocSignatureSpan">grunt-usemin.revvedfinder.prototype.</span>find
            <span class="apidocSignatureSpan">(ofile, searchDirs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.revvedfinder.prototype.getCandidatesFromFS">
            function <span class="apidocSignatureSpan">grunt-usemin.revvedfinder.prototype.</span>getCandidatesFromFS
            <span class="apidocSignatureSpan">(file, searchPaths)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.revvedfinder.prototype.getCandidatesFromMapping">
            function <span class="apidocSignatureSpan">grunt-usemin.revvedfinder.prototype.</span>getCandidatesFromMapping
            <span class="apidocSignatureSpan">(file, searchPaths)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-usemin.revvedfinder.prototype.getRevvedCandidates">
            function <span class="apidocSignatureSpan">grunt-usemin.revvedfinder.prototype.</span>getRevvedCandidates
            <span class="apidocSignatureSpan">(file, searchPaths)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.grunt-usemin" id="apidoc.module.grunt-usemin">module grunt-usemin</a></h1>


    <h2>
        <a href="#apidoc.element.grunt-usemin.configwriter" id="apidoc.element.grunt-usemin.configwriter">
        function <span class="apidocSignatureSpan">grunt-usemin.</span>configwriter
        <span class="apidocSignatureSpan">(flow, dirs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">configwriter = function (flow, dirs) {
  var self = this;
  this.flow = flow;
  // FIXME: check dest and staging are furnished
  this.root = dirs.root;
  this.dest = dirs.dest;
  this.staging = dirs.staging;
  this.steps = {};
  this.postprocessors = [];
  this.destinations = {};

  // We need to create all the needed config writers, given them their output directory
  // E.g, if we do have the flow concat | uglify, the output dir will be .tmp/concat and dist
  // if the flow is concat | uglify | foo, the dirs will be .tmp/concat, .tmp/uglify, dist
  flow.blockTypes().forEach(function (blockType) {
    self.steps[blockType] = [];
    self.postprocessors[blockType] = [];

    flow.steps(blockType).forEach(function (item) {
      var step;
      if (_.isString(item)) {
        step = require(path.join(__dirname, &#x27;config&#x27;, item));
      } else {
        // Assume this is a user furnished step
        // FIXME: Add checks on object attributes
        step = item;
      }
      self.steps[blockType].push(step);
    });

    flow.post(blockType).forEach(function (item) {
      var pp;
      if (_.isString(item)) {
        pp = require(path.join(__dirname, &#x27;config&#x27;, item));
      } else {
        // Assume this is a user furnished post-processor
        // FIXME: Add checks on object attributes
        pp = item;
      }
      self.postprocessors[blockType].push(pp);
    });

  });

  // postprocessorsList.forEach(function (item) {
  //   var pp;
  //   if (_.isString(item)) {
  //     pp = require(path.join(__dirname, &#x27;config&#x27;, item));
  //   } else {
  //     // Assume this is a user furnished post-processor
  //     // FIXME: Add checks on object attributes
  //     pp = item;
  //   }
  //   self.postprocessors.push(pp);
  // });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.fileprocessor" id="apidoc.element.grunt-usemin.fileprocessor">
        function <span class="apidocSignatureSpan">grunt-usemin.</span>fileprocessor
        <span class="apidocSignatureSpan">(type, patterns, finder, logcb, blockReplacements)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fileprocessor = function (type, patterns, finder, logcb, blockReplacements) {
  if (!type) {
    throw new Error(&#x27;No type given&#x27;);
  }

  if (!_.isArray(patterns)) {
    throw new Error(&#x27;Patterns must be an array&#x27;);
  }

  this.patterns = _defaultPatterns[type] || [];

  if (patterns.length) {
    this.patterns = this.patterns.concat(patterns);
  }

  this.log = logcb || function () {};

  if (!finder) {
    throw new Error(&#x27;Missing parameter: finder&#x27;);
  }
  this.finder = finder;


  this.blockReplacements = _.assign({}, defaultBlockReplacements);
  if (blockReplacements &#x26;&#x26; _.keys(blockReplacements).length &#x3e; 0) {
    _.assign(this.blockReplacements, blockReplacements);
  }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.flow" id="apidoc.element.grunt-usemin.flow">
        function <span class="apidocSignatureSpan">grunt-usemin.</span>flow
        <span class="apidocSignatureSpan">(flowConfig)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">flow = function (flowConfig) {
  this.setSteps(flowConfig.steps);
  this.setPost(flowConfig.post);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.revvedfinder" id="apidoc.element.grunt-usemin.revvedfinder">
        function <span class="apidocSignatureSpan">grunt-usemin.</span>revvedfinder
        <span class="apidocSignatureSpan">(locator)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">revvedfinder = function (locator) {
  if (_.isFunction(locator)) {
    debug(&#x27;using function locator&#x27;);
    this.expandfn = locator;
  } else {
    debug(&#x27;using file locator %s&#x27;, locator);
    this.mapping = locator;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.grunt-usemin.configwriter" id="apidoc.module.grunt-usemin.configwriter">module grunt-usemin.configwriter</a></h1>


    <h2>
        <a href="#apidoc.element.grunt-usemin.configwriter.configwriter" id="apidoc.element.grunt-usemin.configwriter.configwriter">
        function <span class="apidocSignatureSpan">grunt-usemin.</span>configwriter
        <span class="apidocSignatureSpan">(flow, dirs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">configwriter = function (flow, dirs) {
  var self = this;
  this.flow = flow;
  // FIXME: check dest and staging are furnished
  this.root = dirs.root;
  this.dest = dirs.dest;
  this.staging = dirs.staging;
  this.steps = {};
  this.postprocessors = [];
  this.destinations = {};

  // We need to create all the needed config writers, given them their output directory
  // E.g, if we do have the flow concat | uglify, the output dir will be .tmp/concat and dist
  // if the flow is concat | uglify | foo, the dirs will be .tmp/concat, .tmp/uglify, dist
  flow.blockTypes().forEach(function (blockType) {
    self.steps[blockType] = [];
    self.postprocessors[blockType] = [];

    flow.steps(blockType).forEach(function (item) {
      var step;
      if (_.isString(item)) {
        step = require(path.join(__dirname, &#x27;config&#x27;, item));
      } else {
        // Assume this is a user furnished step
        // FIXME: Add checks on object attributes
        step = item;
      }
      self.steps[blockType].push(step);
    });

    flow.post(blockType).forEach(function (item) {
      var pp;
      if (_.isString(item)) {
        pp = require(path.join(__dirname, &#x27;config&#x27;, item));
      } else {
        // Assume this is a user furnished post-processor
        // FIXME: Add checks on object attributes
        pp = item;
      }
      self.postprocessors[blockType].push(pp);
    });

  });

  // postprocessorsList.forEach(function (item) {
  //   var pp;
  //   if (_.isString(item)) {
  //     pp = require(path.join(__dirname, &#x27;config&#x27;, item));
  //   } else {
  //     // Assume this is a user furnished post-processor
  //     // FIXME: Add checks on object attributes
  //     pp = item;
  //   }
  //   self.postprocessors.push(pp);
  // });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.grunt-usemin.configwriter.prototype" id="apidoc.module.grunt-usemin.configwriter.prototype">module grunt-usemin.configwriter.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.grunt-usemin.configwriter.prototype.forEachStep" id="apidoc.element.grunt-usemin.configwriter.prototype.forEachStep">
        function <span class="apidocSignatureSpan">grunt-usemin.configwriter.prototype.</span>forEachStep
        <span class="apidocSignatureSpan">(blockType, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forEachStep = function (blockType, cb) {
  var writersCount = this.stepWriters(blockType).length;
  this.stepWriters(blockType).forEach(function (step, index) {
    cb(step, index === writersCount - 1);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    };

    if (block.searchPath.length &#x3e; 0) {
// FIXME: we must use all the furnished directories
context.inDir = block.searchPath[0];
    }

    self.<span class="apidocCodeKeywordSpan">forEachStep</span>(block.type, function (writer, last) {
var blockConfig;
var fileSet;
var dest;

// If this is the last writer of the pipe, we need to output
// in the destination directory
context.outDir = last ? self.dest : path.join(self.staging, writer.name);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.configwriter.prototype.postWriters" id="apidoc.element.grunt-usemin.configwriter.prototype.postWriters">
        function <span class="apidocSignatureSpan">grunt-usemin.configwriter.prototype.</span>postWriters
        <span class="apidocSignatureSpan">(blockType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">postWriters = function (blockType) {
  return this.postprocessors[blockType] || [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  staging: staging
});

var cfgNames = [];
c.stepWriters().forEach(function (i) {
  cfgNames.push(i.name);
});
c.<span class="apidocCodeKeywordSpan">postWriters</span>().forEach(function (i) {
  cfgNames.push(i.name);
});
var gruntConfig = {};
_.forEach(cfgNames, function (name) {
  gruntConfig[name] = grunt.config(name) || {};
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.configwriter.prototype.process" id="apidoc.element.grunt-usemin.configwriter.prototype.process">
        function <span class="apidocSignatureSpan">grunt-usemin.configwriter.prototype.</span>process
        <span class="apidocSignatureSpan">(file, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">process = function (file, config) {
  var self = this;
  var lfile = file;

  config = config || {};

  if (_.isString(file)) {
    lfile = new File(file);
  }

  lfile.blocks.forEach(function (block) {
    // FIXME: support several searchPath...
    var context = {
      inDir: self.root || lfile.searchPath[0],
      inFiles: block.src,
      outFiles: []
    };

    if (block.searchPath.length &#x3e; 0) {
      // FIXME: we must use all the furnished directories
      context.inDir = block.searchPath[0];
    }

    self.forEachStep(block.type, function (writer, last) {
      var blockConfig;
      var fileSet;
      var dest;

      // If this is the last writer of the pipe, we need to output
      // in the destination directory
      context.outDir = last ? self.dest : path.join(self.staging, writer.name);
      context.last = last;
      config[writer.name] = config[writer.name] || {};
      config[writer.name].generated = config[writer.name].generated || {};
      context.options = config[writer.name];
      // config[writer.name].generated = _.extend(config[writer.name].generated, writer.createConfig(context, block));
      blockConfig = writer.createConfig(context, block);
      if (blockConfig.files) {
        fileSet = blockConfig.files;
        blockConfig.files = [];
        fileSet.forEach(function (filesInfo) {
          dest = filesInfo.dest;
          if (!self.destinations[dest]) {
            self.destinations[dest] = filesInfo;
            blockConfig.files.push(filesInfo);
          } else if (!_.isEqual(self.destinations[dest], filesInfo)) {
            throw new Error(&#x27;Different sources attempting to write to the same destination:\n &#x27; + JSON.stringify(self.destinations
[dest], null, &#x27;    &#x27;) + &#x27;\n  &#x27; + JSON.stringify(blockConfig, null, &#x27;    &#x27;));
          }
        });

        if (blockConfig.files.length) {
          config[writer.name].generated = deepMerge(config[writer.name].generated, blockConfig);
        }
      } else {
        config[writer.name].generated = deepMerge(config[writer.name].generated, blockConfig);
      }
      context.inDir = context.outDir;
      context.inFiles = context.outFiles;
      context.outFiles = [];
      context.options = null;
    });

    context.inDir = lfile.searchPath[0];
    if (block.searchPath.length &#x3e; 0) {
      context.inDir = block.searchPath[0];
    }
    context.inFiles = block.src;

    if (self.postprocessors.hasOwnProperty(block.type)) {
      self.postprocessors[block.type].forEach(function (pp) {
        config[pp.name] = config[pp.name] || {};
        context.options = config[pp.name];
        config[pp.name] = _.extend(config[pp.name], pp.createConfig(context, block));
        context.options = null;
      });
    }
  });

  return config;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}, fileObj.src);
files.forEach(function (filename) {
  debug(&#x27;looking at file %s&#x27;, filename);

  grunt.verbose.writeln(chalk.bold(&#x27;Processing as &#x27; + options.type.toUpperCase() + &#x27; - &#x27;) + chalk.cyan(filename
));

  // Our revved version locator
  var content = handler.<span class="apidocCodeKeywordSpan">process</span>(filename, options.assetsDirs);

  // write the new content to disk
  grunt.file.write(filename, content);

});

grunt.log.writeln(&#x27;Replaced &#x27; + chalk.cyan(files.length) + &#x27; &#x27; +
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.configwriter.prototype.stepWriters" id="apidoc.element.grunt-usemin.configwriter.prototype.stepWriters">
        function <span class="apidocSignatureSpan">grunt-usemin.configwriter.prototype.</span>stepWriters
        <span class="apidocSignatureSpan">(blockType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stepWriters = function (blockType) {
  var writers;

  if (blockType) {
    writers = this.steps[blockType] || [];
  } else {
    writers = _.uniq(_.flatten(_.values(this.steps), true)); // Only 1 level
  }
  return writers;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//
// Iterate over steps for the furnished block type.
// The callback is called with the following parameters:
//  - step : the step by itself
//  - last : boolean indicating if this is the last writer of the pipe
//
ConfigWriter.prototype.forEachStep = function (blockType, cb) {
  var writersCount = this.<span class="apidocCodeKeywordSpan">stepWriters</span>(blockType).length;
  this.stepWriters(blockType).forEach(function (step, index) {
    cb(step, index === writersCount - 1);
  });
};

//
// Process the blocks of the furnished file. This means:
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.grunt-usemin.fileprocessor" id="apidoc.module.grunt-usemin.fileprocessor">module grunt-usemin.fileprocessor</a></h1>


    <h2>
        <a href="#apidoc.element.grunt-usemin.fileprocessor.fileprocessor" id="apidoc.element.grunt-usemin.fileprocessor.fileprocessor">
        function <span class="apidocSignatureSpan">grunt-usemin.</span>fileprocessor
        <span class="apidocSignatureSpan">(type, patterns, finder, logcb, blockReplacements)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fileprocessor = function (type, patterns, finder, logcb, blockReplacements) {
  if (!type) {
    throw new Error(&#x27;No type given&#x27;);
  }

  if (!_.isArray(patterns)) {
    throw new Error(&#x27;Patterns must be an array&#x27;);
  }

  this.patterns = _defaultPatterns[type] || [];

  if (patterns.length) {
    this.patterns = this.patterns.concat(patterns);
  }

  this.log = logcb || function () {};

  if (!finder) {
    throw new Error(&#x27;Missing parameter: finder&#x27;);
  }
  this.finder = finder;


  this.blockReplacements = _.assign({}, defaultBlockReplacements);
  if (blockReplacements &#x26;&#x26; _.keys(blockReplacements).length &#x3e; 0) {
    _.assign(this.blockReplacements, blockReplacements);
  }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.grunt-usemin.fileprocessor.prototype" id="apidoc.module.grunt-usemin.fileprocessor.prototype">module grunt-usemin.fileprocessor.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.grunt-usemin.fileprocessor.prototype.process" id="apidoc.element.grunt-usemin.fileprocessor.prototype.process">
        function <span class="apidocSignatureSpan">grunt-usemin.fileprocessor.prototype.</span>process
        <span class="apidocSignatureSpan">(filename, assetSearchPath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">process = function (filename, assetSearchPath) {
  debug(&#x27;processing file %s&#x27;, filename, assetSearchPath);

  if (_.isString(filename)) {
    this.file = new File(filename);
  } else {
    // filename is an object and should conform to lib/file.js API
    this.file = filename;
  }

  if (assetSearchPath &#x26;&#x26; assetSearchPath.length !== 0) {
    this.file.searchPath = assetSearchPath;
  }

  var content = this.replaceWithRevved(this.replaceBlocks(this.file), this.file.searchPath);

  return content;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}, fileObj.src);
files.forEach(function (filename) {
  debug(&#x27;looking at file %s&#x27;, filename);

  grunt.verbose.writeln(chalk.bold(&#x27;Processing as &#x27; + options.type.toUpperCase() + &#x27; - &#x27;) + chalk.cyan(filename
));

  // Our revved version locator
  var content = handler.<span class="apidocCodeKeywordSpan">process</span>(filename, options.assetsDirs);

  // write the new content to disk
  grunt.file.write(filename, content);

});

grunt.log.writeln(&#x27;Replaced &#x27; + chalk.cyan(files.length) + &#x27; &#x27; +
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.fileprocessor.prototype.replaceBlocks" id="apidoc.element.grunt-usemin.fileprocessor.prototype.replaceBlocks">
        function <span class="apidocSignatureSpan">grunt-usemin.fileprocessor.prototype.</span>replaceBlocks
        <span class="apidocSignatureSpan">(file)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function replaceBlocks(file) {
  var result = file.content;
  var linefeed = /\r\n/g.test(result) ? &#x27;\r\n&#x27; : &#x27;\n&#x27;;
  file.blocks.forEach(function (block) {
    var blockLine = block.raw.join(linefeed);
    result = result.replace(blockLine, this.replaceWith(block));
  }, this);
  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    this.file = filename;
  }

  if (assetSearchPath &#x26;&#x26; assetSearchPath.length !== 0) {
    this.file.searchPath = assetSearchPath;
  }

  var content = this.replaceWithRevved(this.<span class="apidocCodeKeywordSpan">replaceBlocks</span>(this.file), this.file.searchPath
);

  return content;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.fileprocessor.prototype.replaceWith" id="apidoc.element.grunt-usemin.fileprocessor.prototype.replaceWith">
        function <span class="apidocSignatureSpan">grunt-usemin.fileprocessor.prototype.</span>replaceWith
        <span class="apidocSignatureSpan">(block)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function replaceWith(block) {
  var result;
  var conditionalStart = block.conditionalStart ? block.conditionalStart + &#x27;\n&#x27; + block.indent : &#x27;&#x27;;
  var conditionalEnd = block.conditionalEnd ? &#x27;\n&#x27; + block.indent + block.conditionalEnd : &#x27;&#x27;;
  if (typeof block.src === &#x27;undefined&#x27; || block.src === null || block.src.length === 0) {
    // there are no css or js files in the block, remove it completely
    result = &#x27;&#x27;;
  } else if (_.contains(_.keys(this.blockReplacements), block.type)) {
    result = block.indent + conditionalStart + this.blockReplacements[block.type](block) + conditionalEnd;
  } else {
    result = &#x27;&#x27;;
  }
  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Replace blocks by their target
//
FileProcessor.prototype.replaceBlocks = function replaceBlocks(file) {
var result = file.content;
var linefeed = /\r\n/g.test(result) ? &#x27;\r\n&#x27; : &#x27;\n&#x27;;
file.blocks.forEach(function (block) {
  var blockLine = block.raw.join(linefeed);
  result = result.replace(blockLine, this.<span class="apidocCodeKeywordSpan">replaceWith</span>(block));
}, this);
return result;
};


FileProcessor.prototype.replaceWith = function replaceWith(block) {
var result;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.fileprocessor.prototype.replaceWithRevved" id="apidoc.element.grunt-usemin.fileprocessor.prototype.replaceWithRevved">
        function <span class="apidocSignatureSpan">grunt-usemin.fileprocessor.prototype.</span>replaceWithRevved
        <span class="apidocSignatureSpan">(lines, assetSearchPath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function replaceWithRevved(lines, assetSearchPath) {
  // Replace script sources
  var self = this;
  var content = lines;
  var regexps = this.patterns;
  var identity = function (m) {
    return m;
  };

  // Replace reference to script with the actual name of the revved script
  regexps.forEach(function (rxl) {
    var filterIn = rxl[2] || identity;
    var filterOut = rxl[3] || identity;

    self.log(rxl[1]);
    content = content.replace(rxl[0], function (match, src) {
      // Consider reference from site root
      var srcFile = filterIn(src);

      debug(&#x27;Let\&#x27;s replace &#x27; + src);

      debug(&#x27;Looking for revved version of &#x27; + srcFile + &#x27; in &#x27;, assetSearchPath);

      var file = self.finder.find(srcFile, assetSearchPath);

      debug(&#x27;Found file \&#x27;%s\&#x27;&#x27;, file);

      if (src === &#x27;/&#x27;) {
        return match;
      }

      var res = match.replace(src, filterOut(file));
      if (srcFile !== file) {
        self.log(chalk.cyan(src) + &#x27; changed to &#x27; + chalk.cyan(file));
      }
      return res;
    });
  });

  return content;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    this.file = filename;
  }

  if (assetSearchPath &#x26;&#x26; assetSearchPath.length !== 0) {
    this.file.searchPath = assetSearchPath;
  }

  var content = this.<span class="apidocCodeKeywordSpan">replaceWithRevved</span>(this.replaceBlocks(this.file), this.file.searchPath
);

  return content;
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.grunt-usemin.flow" id="apidoc.module.grunt-usemin.flow">module grunt-usemin.flow</a></h1>


    <h2>
        <a href="#apidoc.element.grunt-usemin.flow.flow" id="apidoc.element.grunt-usemin.flow.flow">
        function <span class="apidocSignatureSpan">grunt-usemin.</span>flow
        <span class="apidocSignatureSpan">(flowConfig)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">flow = function (flowConfig) {
  this.setSteps(flowConfig.steps);
  this.setPost(flowConfig.post);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.flow.formatStepName" id="apidoc.element.grunt-usemin.flow.formatStepName">
        function <span class="apidocSignatureSpan">grunt-usemin.flow.</span>formatStepName
        <span class="apidocSignatureSpan">(step)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">formatStepName = function (step) {
  if (typeof step === &#x27;string&#x27;) {
    return /uglify/.test(step) ? &#x27;uglify&#x27; : step;
  }

  step.name = /uglify/.test(step.name) ? &#x27;uglify&#x27; : step.name;

  return step;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.flow.formatSteps" id="apidoc.element.grunt-usemin.flow.formatSteps">
        function <span class="apidocSignatureSpan">grunt-usemin.flow.</span>formatSteps
        <span class="apidocSignatureSpan">(steps)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">formatSteps = function (steps) {
  var formattedSteps = {};
  _.forIn(steps, function (config, type) {
    formattedSteps[type] = config.map(Flow.formatStepName);
  });

  return formattedSteps;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return this._steps[blockType] || [];
};

//
// Set the steps for the flow
//
Flow.prototype.setSteps = function (steps) {
this._steps = Flow.<span class="apidocCodeKeywordSpan">formatSteps</span>(steps) || {};
};

//
// Returns the postprocessors for the furnished block type
//
Flow.prototype.post = function (blockType) {
return this._post[blockType] || [];
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.grunt-usemin.flow.prototype" id="apidoc.module.grunt-usemin.flow.prototype">module grunt-usemin.flow.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.grunt-usemin.flow.prototype.blockTypes" id="apidoc.element.grunt-usemin.flow.prototype.blockTypes">
        function <span class="apidocSignatureSpan">grunt-usemin.flow.prototype.</span>blockTypes
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">blockTypes = function () {
  return _.union(_.keys(this._steps), _.keys(this._post));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this.steps = {};
  this.postprocessors = [];
  this.destinations = {};

  // We need to create all the needed config writers, given them their output directory
  // E.g, if we do have the flow concat | uglify, the output dir will be .tmp/concat and dist
  // if the flow is concat | uglify | foo, the dirs will be .tmp/concat, .tmp/uglify, dist
  flow.<span class="apidocCodeKeywordSpan">blockTypes</span>().forEach(function (blockType) {
self.steps[blockType] = [];
self.postprocessors[blockType] = [];

flow.steps(blockType).forEach(function (item) {
  var step;
  if (_.isString(item)) {
    step = require(path.join(__dirname, &#x27;config&#x27;, item));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.flow.prototype.post" id="apidoc.element.grunt-usemin.flow.prototype.post">
        function <span class="apidocSignatureSpan">grunt-usemin.flow.prototype.</span>post
        <span class="apidocSignatureSpan">(blockType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">post = function (blockType) {
  return this._post[blockType] || [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // Assume this is a user furnished step
    // FIXME: Add checks on object attributes
    step = item;
  }
  self.steps[blockType].push(step);
});

flow.<span class="apidocCodeKeywordSpan">post</span>(blockType).forEach(function (item) {
  var pp;
  if (_.isString(item)) {
    pp = require(path.join(__dirname, &#x27;config&#x27;, item));
  } else {
    // Assume this is a user furnished post-processor
    // FIXME: Add checks on object attributes
    pp = item;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.flow.prototype.setPost" id="apidoc.element.grunt-usemin.flow.prototype.setPost">
        function <span class="apidocSignatureSpan">grunt-usemin.flow.prototype.</span>setPost
        <span class="apidocSignatureSpan">(post)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setPost = function (post) {
  this._post = Flow.formatSteps(post) || {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//      js: [&#x27;bar&#x27;, &#x27;baz&#x27;],
//      css: [&#x27;foo&#x27;]
//     }
//   }
//
var Flow = module.exports = function (flowConfig) {
this.setSteps(flowConfig.steps);
this.<span class="apidocCodeKeywordSpan">setPost</span>(flowConfig.post);
};

Flow.formatStepName = function (step) {
if (typeof step === &#x27;string&#x27;) {
  return /uglify/.test(step) ? &#x27;uglify&#x27; : step;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.flow.prototype.setSteps" id="apidoc.element.grunt-usemin.flow.prototype.setSteps">
        function <span class="apidocSignatureSpan">grunt-usemin.flow.prototype.</span>setSteps
        <span class="apidocSignatureSpan">(steps)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setSteps = function (steps) {
  this._steps = Flow.formatSteps(steps) || {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//    steps: {
//      js: [&#x27;bar&#x27;, &#x27;baz&#x27;],
//      css: [&#x27;foo&#x27;]
//     }
//   }
//
var Flow = module.exports = function (flowConfig) {
this.<span class="apidocCodeKeywordSpan">setSteps</span>(flowConfig.steps);
this.setPost(flowConfig.post);
};

Flow.formatStepName = function (step) {
if (typeof step === &#x27;string&#x27;) {
  return /uglify/.test(step) ? &#x27;uglify&#x27; : step;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.flow.prototype.steps" id="apidoc.element.grunt-usemin.flow.prototype.steps">
        function <span class="apidocSignatureSpan">grunt-usemin.flow.prototype.</span>steps
        <span class="apidocSignatureSpan">(blockType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">steps = function (blockType) {
  return this._steps[blockType] || [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // We need to create all the needed config writers, given them their output directory
  // E.g, if we do have the flow concat | uglify, the output dir will be .tmp/concat and dist
  // if the flow is concat | uglify | foo, the dirs will be .tmp/concat, .tmp/uglify, dist
  flow.blockTypes().forEach(function (blockType) {
self.steps[blockType] = [];
self.postprocessors[blockType] = [];

flow.<span class="apidocCodeKeywordSpan">steps</span>(blockType).forEach(function (item) {
  var step;
  if (_.isString(item)) {
    step = require(path.join(__dirname, &#x27;config&#x27;, item));
  } else {
    // Assume this is a user furnished step
    // FIXME: Add checks on object attributes
    step = item;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.grunt-usemin.revvedfinder" id="apidoc.module.grunt-usemin.revvedfinder">module grunt-usemin.revvedfinder</a></h1>


    <h2>
        <a href="#apidoc.element.grunt-usemin.revvedfinder.revvedfinder" id="apidoc.element.grunt-usemin.revvedfinder.revvedfinder">
        function <span class="apidocSignatureSpan">grunt-usemin.</span>revvedfinder
        <span class="apidocSignatureSpan">(locator)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">revvedfinder = function (locator) {
  if (_.isFunction(locator)) {
    debug(&#x27;using function locator&#x27;);
    this.expandfn = locator;
  } else {
    debug(&#x27;using file locator %s&#x27;, locator);
    this.mapping = locator;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.grunt-usemin.revvedfinder.prototype" id="apidoc.module.grunt-usemin.revvedfinder.prototype">module grunt-usemin.revvedfinder.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.grunt-usemin.revvedfinder.prototype.find" id="apidoc.element.grunt-usemin.revvedfinder.prototype.find">
        function <span class="apidocSignatureSpan">grunt-usemin.revvedfinder.prototype.</span>find
        <span class="apidocSignatureSpan">(ofile, searchDirs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function find(ofile, searchDirs) {
  var file = ofile;
  var searchPaths = searchDirs;
  var absolute;
  var prefix;

  if (_.isString(searchDirs)) {
    searchPaths = [searchDirs];
  }

  debug(&#x27;Looking for revved version of %s in &#x27;, ofile, searchPaths);

  // do not touch external files or the root
  // FIXME: Should get only relative files
  if (ofile.match(/:\/\//) || ofile === &#x27;&#x27;) {
    return ofile;
  }

  if (file[0] === &#x27;/&#x27;) {
    // We need to remember this is an absolute file, but transform it
    // to a relative one
    absolute = true;
    file = file.replace(/^(\/+)/, function (match, header) {
      prefix = header;
      return &#x27;&#x27;;
    });
  }

  var filepaths = this.getRevvedCandidates(file, searchPaths);

  var filepath = filepaths[0];
  debug(&#x27;filepath is now &#x27;, filepath);

  // not a file in temp, skip it
  if (!filepath) {
    return ofile;
  }

  // var filename = path.basename(filepath);
  // handle the relative prefix (with always unix like path even on win32)
  // if (dirname !== &#x27;.&#x27;) {
  //   filename = [dirname, filename].join(&#x27;/&#x27;);
  // }

  if (absolute) {
    filepath = prefix + filepath;
  }

  debug(&#x27;Let\&#x27;s return %s&#x27;, filepath);
  return filepath;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Consider reference from site root
var srcFile = filterIn(src);

debug(&#x27;Let\&#x27;s replace &#x27; + src);

debug(&#x27;Looking for revved version of &#x27; + srcFile + &#x27; in &#x27;, assetSearchPath);

var file = self.finder.<span class="apidocCodeKeywordSpan">find</span>(srcFile, assetSearchPath);

debug(&#x27;Found file \&#x27;%s\&#x27;&#x27;, file);

if (src === &#x27;/&#x27;) {
  return match;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.revvedfinder.prototype.getCandidatesFromFS" id="apidoc.element.grunt-usemin.revvedfinder.prototype.getCandidatesFromFS">
        function <span class="apidocSignatureSpan">grunt-usemin.revvedfinder.prototype.</span>getCandidatesFromFS
        <span class="apidocSignatureSpan">(file, searchPaths)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getCandidatesFromFS = function (file, searchPaths) {
  var extname = path.extname(file);
  var basename = path.basename(file, extname);
  var dirname = path.dirname(file);
  var hex = &#x27;[0-9a-fA-F]+&#x27;;
  var regPrefix = &#x27;(&#x27; + hex + &#x27;\\.&#x27; + regexpQuote(basename) + &#x27;)&#x27;;
  var regSuffix = &#x27;(&#x27; + regexpQuote(basename) + &#x27;\\.&#x27; + hex + regexpQuote(extname) + &#x27;)&#x27;;
  var revvedRx = new RegExp(regPrefix + &#x27;|&#x27; + regSuffix);
  var candidates = [];
  var self = this;

  searchPaths.forEach(function (sp) {
    var searchString = path.join(sp, dirname, basename + &#x27;.*&#x27; + extname);
    var prefixSearchString = path.join(sp, dirname, &#x27;*.&#x27; + basename + extname);

    if (searchString.indexOf(&#x27;#&#x27;) === 0) {
      // patterns starting with # are treated as comments by the glob implementation which returns undefined,
      // which would cause an unhandled exception in self.expandfn below so the file is never written
      return;
    }

    debug(&#x27;Looking for %s and %s on disk&#x27;, searchString, prefixSearchString);

    var files = self.expandfn([searchString, prefixSearchString]);

    debug(&#x27;Found &#x27;, files);

    // Keep only files that look like a revved file
    var goodFiles = files.filter(function (f) {
      return f.match(revvedRx);
    });

    // We must now remove the search path from the beginning, and add them to the
    // list of candidates
    goodFiles.forEach(function (gf) {
      var goodFileName = path.basename(gf);
      if (!file.match(/\//)) {
        // We only get a file (i.e. no dirs), so let&#x27;s send back
        // what we found
        debug(&#x27;Adding %s to candidates&#x27;, goodFileName);
        candidates.push(goodFileName);
      } else {
        debug(&#x27;Adding %s / %s to candidates&#x27;, dirname, goodFileName);
        candidates.push(dirname + &#x27;/&#x27; + goodFileName);
      }
    });
  });

  return candidates;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // FIXME:

  if (this.mapping) {
    debug(&#x27;Looking at mapping&#x27;);
    candidates = this.getCandidatesFromMapping(file, searchPaths);
  } else {
    debug(&#x27;Looking on disk&#x27;);
    candidates = this.<span class="apidocCodeKeywordSpan">getCandidatesFromFS</span>(file, searchPaths);
  }

  return candidates;
};

//
// Find a revved version of +ofile+ (i.e. a file which name is ending with +ofile+), relatively
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.revvedfinder.prototype.getCandidatesFromMapping" id="apidoc.element.grunt-usemin.revvedfinder.prototype.getCandidatesFromMapping">
        function <span class="apidocSignatureSpan">grunt-usemin.revvedfinder.prototype.</span>getCandidatesFromMapping
        <span class="apidocSignatureSpan">(file, searchPaths)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getCandidatesFromMapping = function (file, searchPaths) {
  var dirname = path.dirname(file);
  var filepath = dirname === &#x27;.&#x27; ? &#x27;&#x27; : dirname + &#x27;/&#x27;;
  var candidates = [];
  var self = this;

  searchPaths.forEach(function (sp) {
    var key = path.normalize(path.join(sp, file));
    debug(&#x27;Looking at mapping for %s (from %s/%s)&#x27;, key, sp, file);

    if (self.mapping[key]) {
      // We need to transform the actual file to a form that matches the one we received
      // For example if we received file &#x27;foo/images/test.png&#x27; with searchPaths == [&#x27;dist&#x27;],
      // and found in mapping that &#x27;dist/foo/images/test.png&#x27; has been renamed
      // &#x27;dist/foo/images/test.1234.png&#x27; by grunt-rev, then we need to return
      // &#x27;foo/images/test.1234.png&#x27;
      var cfile = path.basename(self.mapping[key]);
      candidates.push(filepath + cfile);
      debug(&#x27;Found a candidate: %s/%s&#x27;, dirname, cfile);
    }
  });

  return candidates;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // Our strategy depends on what we get at creation time: either a mapping, and we &#x22;just&#x22;
  // need to do look-up in the mapping, or an expand function and we need to find relevant files
  // on the disk
  // FIXME:

  if (this.mapping) {
    debug(&#x27;Looking at mapping&#x27;);
    candidates = this.<span class="apidocCodeKeywordSpan">getCandidatesFromMapping</span>(file, searchPaths);
  } else {
    debug(&#x27;Looking on disk&#x27;);
    candidates = this.getCandidatesFromFS(file, searchPaths);
  }

  return candidates;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-usemin.revvedfinder.prototype.getRevvedCandidates" id="apidoc.element.grunt-usemin.revvedfinder.prototype.getRevvedCandidates">
        function <span class="apidocSignatureSpan">grunt-usemin.revvedfinder.prototype.</span>getRevvedCandidates
        <span class="apidocSignatureSpan">(file, searchPaths)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getRevvedCandidates = function (file, searchPaths) {
  var candidates;

  // Our strategy depends on what we get at creation time: either a mapping, and we &#x22;just&#x22;
  // need to do look-up in the mapping, or an expand function and we need to find relevant files
  // on the disk
  // FIXME:

  if (this.mapping) {
    debug(&#x27;Looking at mapping&#x27;);
    candidates = this.getCandidatesFromMapping(file, searchPaths);
  } else {
    debug(&#x27;Looking on disk&#x27;);
    candidates = this.getCandidatesFromFS(file, searchPaths);
  }

  return candidates;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  absolute = true;
  file = file.replace(/^(\/+)/, function (match, header) {
    prefix = header;
    return &#x27;&#x27;;
  });
}

var filepaths = this.<span class="apidocCodeKeywordSpan">getRevvedCandidates</span>(file, searchPaths);

var filepath = filepaths[0];
debug(&#x27;filepath is now &#x27;, filepath);

// not a file in temp, skip it
if (!filepath) {
  return ofile;
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
